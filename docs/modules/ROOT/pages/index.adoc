= MuleSoft SAP Workshop for Mule 4.x
ifndef::env-site,env-github[]
include::_attributes.adoc[]
endif::[]
// Settings
:idprefix:
:idseparator: -

Welcome to the MuleSoft SAP Workshop for Mule 4.x. This workshop consists of a set of guides that will provide you hands-on experience with connecting with SAP using a variety of methods provided through the Anypoint Platform.

:halign: left
:valign: top
[width="75%", adoc]
|===

a| **Prerequisites**

* Anypoint Studio (https://www.mulesoft.com/lp/dl/studio[Download])
* SAP Connector 5.0
* SAP ECC R3 or S/4 HANA Instance
|===

In order to complete these guides, you'll need a copy of Anypoint Studio 7.4.x which is free to https://www.mulesoft.com/lp/dl/studio[download] and install on your Windows, Mac, or Linux machine.

[width="100%"]
|=======
|**Database** |**SAP JCo** |**OData**
|image:DBConnectorImage.png[] |image:SAPConnector2.png[] |image:Odata.png[]
|This guide will walk you through the process of connecting with an SAP S/4HANA Database. |This guide will walk you through connecting with SAP using the SAP Connector which leverages the SAP JCo Library. |This guide provides a overview on how to connect to OData datasources such as endpoints exposed from SAP NetWeaver Gateway using the HTTP Connector.
|=======

Reminder: The SAP Connector guide requires the use of your own SAP instance. If you don’t have one, you can leverage a hosted SAP service. For the purposes of this guide, we utilized https://idesremote.com/[Sandbox SAP].


== Overview

SAP is one of the most popular enterprise resource planning (ERP) solutions available on the market today. Businesses looking to fully harness the power of SAP often wish to integrate it with other applications such as client relationship management (CRM) applications, creating end-to-end processes across the applications, on-premise or in the cloud.

With MuleSoft, customers can deliver integrations quickly, easily, and cost effectively in order to integrate SAP solutions with other systems in the enterprise using our library of connectors.

== SAP Integration & API Strategy

There are a number of different design patterns that can be leveraged to integrate with SAP, the decision criteria for choosing one pattern over another include SAP development time, MuleSoft development time, NetWeaver Gateway risk assessment, and account maintenance/visibility.

The most common technologies are IDoc, BAPI/RFM, file extracts, SAP Netweaver Gateway, and SOAP Web Services to integrate with SAP

.Web Services
|=================================
|Method|Description|Approach
|Web Services|SAP Netweaver Gateway exposes data as REST or OData APIs.|* Use HTTP or OData Connector +
*  XML or JSON Data +
*  Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance. +
*  In the case where SAP exposes APIs to unlock the data, consuming the APIs from Mule flows would involve simply configuring a HTTP connector. +
* No SAP jars/libraries are required +
* In this scenario Mule serves as a simple HTTP proxy for the APIs, enforces authentication, policies (rate limiting/throttling etc..) and captures analytics. +
* This approach is better fit for realtime and singular data.
|=================================

.BAPI
|=================================
|Method|Description|Approach
|BAPI / Remote Function Module|Call SAP native API functions directly. Supports execution of BAPI functions over the RFC protocol (synchronous RFC, transactional RFC, queued RFC)|* Use SAP Connector, a SAP-certified Java connector that leverages the SAP Java Connector (JCo) and IDoc libraries +
* Works with both SAP ERP and S/4HANA +
* XML Data +
* Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance.
|=================================

.IDOC Send
|=================================
|Method|Description|Approach
|Send IDoc to SAP|Intermediate documents in either standard or extended formats exchanged through SAP framework.|* Use SAP Connector, a SAP-certified Java connector that leverages the SAP Java Connector (JCo) and IDoc libraries +
* Works with both SAP ERP and S/4HANA +
* XML Data +
* Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance.
|=================================

.IDOC Receipt
|=================================
|Method|Description|Approach
|IDoc from SAP|Intermediate documents in either standard or extended formats exchanged through SAP framework.|* Use SAP Connector, a SAP-certified Java connector that leverages the SAP Java Connector (JCo) and IDoc libraries +
* Works with both SAP ERP and S/4HANA +
* XML Data +
* Real time / event based +
* Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance.
|=================================

.S/4HANA Database
|=================================
|Method|Description|Approach
|Database / S/4HANA Database|Direct calls to SAP database.|* Use Database Connector +
* Not recommended +
* Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance. +
* MuleSoft can easily interact with data in SAP DB / S/4HANA DB using the Database Connector +
* All that is required is the S/4HANA JDBC driver +
* Standard database operations are exposed from the connector (select, insert, update, delete, etc...
|=================================

.File Extracts
|=================================
|Method|Description|Approach
|File Extracts| *Scheduled SAP jobs import/export files. +
* Files are in IDoc format.|* Scheduled SAP jobs import/export files. +
* Files are in IDoc format. +
* Use File Connector or S/FTP Connector +
* Mule can either connect from Anypoint VPC in CloudHub or be co-located near SAP instance.
|=================================

== Other SAP Project Considerations

* The company's current investment in BAPI and IDoc integrations
* NetWeaver Gateway direction driven by SAP
* Managed system APIs in SAP
* The performance characteristics of these integration methods are not fully understood with respect to the responsiveness of SAP and require testing.
* Development lead time for changes / additions on SAP - i.e. custom BAPI development ( generally this is outside the scope of MuleSoft resources)


== SAP Workshop Resources

=== Links

Database Connector +
* https://docs.mulesoft.com/connectors/db-connector-index

SAP Connector +
* https://docs.mulesoft.com/connectors/sap-connector

HTTP Connector +
* https://docs.mulesoft.com/connectors/http-connector-studio

=== Projects

Database +
https://github.com/djuang1/sap-workshop-4x-hana-database

SAP - BAPI Integration & IDOC Integration +
https://github.com/djuang1/sap-workshop-4x-sap-s4hana

HTTP +
https://github.com/djuang1/sap-workshop-4x-odata-api

=== Glossary

* *ABAP* – Advanced Business Application Programming is a high level programming language created by SAP.
* *BAPI* – business application programming interface is a defined interface that can be used by SAP and non-SAP applications to perform data operations on SAP data.
* *ERP* – Enterprise Resource Planning software used by businesses to manage a variety of functions including Finance, Manufacturing, Logistics, Supply Chain, etc..  SAP’s ERP suite has a number of modules that address these different functions.
* *IDocs* – Intermediate Document interface – just like BAPI this is an interface with a defined document format for transferring data within SAP and non-SAP applications.
* *MuleSoft SAP Connector* – aka our SAP JCO connector that in combination with our MuleSoft Integration Runtime allows for bi-directional connectivity between SAP SAP ERP and S/4HANA and other applications like CRM (e.g., SFDC).
* *RFC* – Remote Function Call – just like iDocs this is an interface for communication between SAP and other SAP or third-party compatible applications.
* *SAP Java Connector (SAP JCo)* - a middleware component that enables the development of SAP-compatible components and applications in Java. SAP JCo supports communication with the SAP Server in both directions: inbound calls (Java calls ABAP) and outbound calls (ABAP calls Java).

=== Download Github Project

Go to Github and click on Clone or download and then click on Download ZIP

* Locate the file in your file system and unzip the file.
* Go to File > Import
* In the Import window, expand the Anypoint Studio node and select Anypoint Studio project from File System and then click on Next
* Browse for the file and locate the folder where the project was unzipped. Once you select the folder, the Project Root: field will be filled in.
* Click on Finish
